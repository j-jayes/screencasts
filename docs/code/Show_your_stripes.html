<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.237">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jonathan">
<meta name="dcterms.date" content="2022-04-01">
<meta name="description" content="Using ggplot to recreate a classic climate change visualization.">
<title>R Screencasts - Recreating Ed Hawkins’ Show Your Stripes graphic</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="../site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script><script src="../site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script><script src="../site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script><link href="../site_libs/ggiraphjs-0.4.2/ggiraphjs.min.css" rel="stylesheet">
<script src="../site_libs/ggiraphjs-0.4.2/ggiraphjs.min.js"></script><script src="../site_libs/girafe-binding-0.8.3/girafe.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/favicon.ico" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">R Screencasts</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Screencasts</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/j-jayes/screencasts"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#checks" id="toc-checks" class="nav-link active" data-scroll-target="#checks">Checks</a></li>
  <li>
<a href="#welcome" id="toc-welcome" class="nav-link" data-scroll-target="#welcome">Welcome</a>
  <ul class="collapse">
<li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio">Rstudio</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">EDA</a></li>
  <li><a href="#recreating-the-figure" id="toc-recreating-the-figure" class="nav-link" data-scroll-target="#recreating-the-figure">Recreating the figure</a></li>
  <li><a href="#interactive-chart" id="toc-interactive-chart" class="nav-link" data-scroll-target="#interactive-chart">Interactive chart</a></li>
  <li><a href="#post-script" id="toc-post-script" class="nav-link" data-scroll-target="#post-script">Post script</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Recreating Ed Hawkins’ Show Your Stripes graphic</h1>
</div>

<div>
  <div class="description">
    Using <code>ggplot</code> to recreate a classic climate change visualization.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 1, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header><section id="checks" class="level2"><h2 class="anchored" data-anchor-id="checks">Checks</h2>
<p>Clean environment in Rstuido Folder path in Rstudio</p>
</section><section id="welcome" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="welcome">Welcome</h2>
<p>Hello and welcome to my collection of screencasts. Today we will be recreating a classic climate change visualization, the <em>show your stripes</em> graphic by Ed Hawkins. This graphic shows how the global temperature has increased over time, going from blue to red on the colour scale.</p>
<p>It is a powerful reminder of how our human activity has resulted in climate change.</p>
<p>In this video we’re going to ingest the data into R, do some exploratory analysis, and the recreate the visualization in <code>ggplot</code>.</p>
<p>As usual, if you have any questions about the commands that we are using, please feel free to leave a comment below, or have a look at the accompanying post linked in the description that includes the code used in the analysis which follows.</p>
<p>As you can see, in this post you can click on any of the commands and be taken to their documentation to see which package they are from, and how each command works.</p>
<div class="cell">
<iframe src="https://showyourstripes.info/" width="672" height="400px" data-external="1">
</iframe>
</div>
<section id="rstudio" class="level3"><h3 class="anchored" data-anchor-id="rstudio">Rstudio</h3>
<p>Let’s open up Rstudio now and create a fresh Rmarkdown document.</p>
<p>We can clear out the boilerplate code that is in place to show us how Rmarkdown documents work, and create some scaffolding for our analysis.</p>
<p>We’re going to want to include a section on:</p>
<ul>
<li>reading in the data</li>
<li>some exploratory data analysis</li>
<li>recreating the figure</li>
<li>adding interactivity</li>
</ul></section><section id="data" class="level3"><h3 class="anchored" data-anchor-id="data">Data</h3>
<p>The original visualization is displayed on a website called ShowYourStripes.info, where you can select different regions to see how they have warmed over time. We’re doing to be looking at the entire globe.</p>
<p>If you click on the FAQ section, we can see that the global data is sourced from the UK’s met office. We can head on over to their website to understand a bit more about the data and download it.</p>
<p>We read that the “Time series are presented as temperature anomalies (deg C) relative to 1961-1990.” This means we aren’t getting an average temperature, but rather the deviation from the average temperature globally in the base period from 1961 to 1990.</p>
<p>We can select the global series at monthly level, and copy the link address so as to read it directly into Rstudio.</p>
<p>The first thing we will do is load the tidyverse meta package.</p>
<p>We can then use the readr package to read in the comma separated value file as a dataframe named df.</p>
<p>If we print the dataframe in the console, we can see that it has four columns and 2,066 rows.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.3.6      ✔ purrr   0.3.5 
✔ tibble  3.1.8      ✔ dplyr   1.0.10
✔ tidyr   1.2.1      ✔ stringr 1.4.1 
✔ readr   2.1.3      ✔ forcats 0.5.2 
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://www.metoffice.gov.uk/hadobs/hadcrut5/data/current/analysis/diagnostics/HadCRUT.5.0.1.0.analysis.summary_series.global.monthly.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 2073 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): Time
dbl (3): Anomaly (deg C), Lower confidence limit (2.5%), Upper confidence li...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>If we ask for the column names we can see that they’re a little bit difficult to work with, containing parentheses and percentage signs.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Time"                           "Anomaly (deg C)"               
[3] "Lower confidence limit (2.5%)"  "Upper confidence limit (97.5%)"</code></pre>
</div>
</div>
<p>We can use the janitor package to clean up the names into camel case, where all of the letters are in lower case and words are separated by underscores.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "time"                                "anomaly_deg_c"                      
[3] "lower_confidence_limit_2_5_percent"  "upper_confidence_limit_97_5_percent"</code></pre>
</div>
</div>
<p>Helpfully the janitor command clean names also changes the percentage signs to the word percent.</p>
<p>Let’s now try to get a better feel for the data.</p>
</section><section id="eda" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="eda">EDA</h3>
<p>Let’s begin by looking at the dataset with the <code>skimr</code> package:</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">skimr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">2073</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">time</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2073</td>
<td style="text-align: right;">0</td>
</tr></tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 34%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">anomaly_deg_c</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-0.08</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">-1.04</td>
<td style="text-align: right;">-0.35</td>
<td style="text-align: right;">-0.16</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">1.22</td>
<td style="text-align: left;">▁▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">lower_confidence_limit_2_5_percent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-0.22</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">-1.22</td>
<td style="text-align: right;">-0.55</td>
<td style="text-align: right;">-0.31</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: left;">▁▇▅▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">upper_confidence_limit_97_5_percent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">-0.87</td>
<td style="text-align: right;">-0.17</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">1.26</td>
<td style="text-align: left;">▁▇▆▂▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can see that we have three numeric columns and one character column, time. The data is all complete, with no missing values.</p>
<p>Let’s see if we can plot the data using <code>ggplot</code>.</p>
<p>We use <code>ggplot</code>’s aesthetic mapping here, putting time on the x-axis and the temperature anomaly in degrees Celsius on the y-axis.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The x-axis is a bit of a mess! That’s because th time variable is stored as a character, rather than a date:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,073 × 1
   time   
   &lt;chr&gt;  
 1 1850-01
 2 1850-02
 3 1850-03
 4 1850-04
 5 1850-05
 6 1850-06
 7 1850-07
 8 1850-08
 9 1850-09
10 1850-10
# … with 2,063 more rows</code></pre>
</div>
</div>
<p>Let’s rather try to change these characters to a date with the help of the <code>lubridate</code> package.</p>
<p>The <code>lubridate</code> command ymd here will parse a date in the form, year, then month, and then day. Because our data comes with just a year and month value, we can paste a string indicating the first of the month with the <code>paste0</code> command from base R.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">time</span>, <span class="st">"-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us try and plot the data again - using the <code>geom_smooth</code> command to add a smoothed line in top of the points.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Wow! That’s way better. We also added a dotted line at y = 0 to show use which values are below and above the baseline temperature level.</p>
</section><section id="recreating-the-figure" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="recreating-the-figure">Recreating the figure</h3>
<p>If we want to recreate the figure from Ed Hawkins, we can use the geom_tile geometry in <code>ggplot</code>.</p>
<p>In this case, we are going to map time onto the x-axis, and the deviation from the base temperature to the fill aesthetic. For the y-axis we will just choose an arbitrary constant, in this case 1.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we’re getting somewhere, we can see that the colour is lighter to the right of the figure - but we need to improve our colour scale in order to match that of the original graphic.</p>
<p>Let’s add a gradient colour scale with the command <code>scale_fill_gradient2</code> from <code>ggplot</code>. Here we can specify we want the low values to be blue, the high values red, the mid values white, and the point at which the white is shown as zero.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>That’s great! Let’s now remove some of the superfluous elements and add in some labels.</p>
<p>In this case, we are going to remove the legend as this graphic is more about the message than the actual values.</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Inspired by Ed Hawkins\nData from the Met Office"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finally, we can remove a bit of the noise in the figure calculating a yearly average from our monthly values. Here we can use the <code>group_by</code> and <code>across</code> function from dplyr.</p>
<p>We create a grouping variable with the <code><a href="https://lubridate.tidyverse.org/reference/year.html">lubridate::year</a></code> command, group by year, and then use the across function to calculate the mean for each year for our three numeric variables.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="va">anomaly_deg_c</span><span class="op">:</span><span class="va">upper_confidence_limit_97_5_percent</span>, <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">year</span>, .keep_all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we can reuse the graphics code from above to create a chart that more closely matches the version we saw on showyourstripes.info.</p>
<div class="cell page-columns page-full">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Inspired by Ed Hawkins\nData from the Met Office"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="interactive-chart" class="level3"><h3 class="anchored" data-anchor-id="interactive-chart">Interactive chart</h3>
<p>In addition, if we are going to publish our figure online, it might be fun to introduce a bit of interactivity. This is easily accomplished with the <code>ggiraph</code> package.</p>
<p>This package takes static <code>ggplot</code> geometries and makes them interactive such that hovering over the figure shows a data value beside the cursor.</p>
<p>There are three steps:</p>
<ol type="1">
<li><p>We modify our graphics code from <code>geom_tile</code> to <code>geom_tile_interactive</code></p></li>
<li><p>We add in an argument for the <code>tooltip</code> value in the <code>ggplot</code> aesthetic mapping</p></li>
<li><p>We assign our graphics code to an R object and call it from inside the command <code>ggiraph</code>.</p></li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://davidgohel.github.io/ggiraph/">ggiraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span>, tooltip <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://davidgohel.github.io/ggiraph/reference/geom_rect_interactive.html">geom_tile_interactive</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Inspired by Ed Hawkins\nData from the Met Office"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">g_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://davidgohel.github.io/ggiraph/reference/ggiraph.html">ggiraph</a></span><span class="op">(</span>ggobj <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g_out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-a7793ae647432e490146" style="width:100%;height:464px;" class="girafe html-widget"></div>
<script type="application/json" data-for="htmlwidget-a7793ae647432e490146">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' id='svg_585d01e7-4516-459d-9897-30f039768e0a' viewBox='0 0 432 360'>\n <defs>\n  <clipPath id='svg_585d01e7-4516-459d-9897-30f039768e0a_c1'>\n   <rect x='0' y='0' width='432' height='360'/>\n  <\/clipPath>\n  <clipPath id='svg_585d01e7-4516-459d-9897-30f039768e0a_c2'>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89'/>\n  <\/clipPath>\n <\/defs>\n <g>\n  <g clip-path='url(#svg_585d01e7-4516-459d-9897-30f039768e0a_c1)'>\n   <rect x='0' y='0' width='432' height='360' fill='#FFFFFF' stroke='#FFFFFF' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round'/>\n   <rect x='0' y='0' width='432' height='360' fill='#FFFFFF' stroke='#FFFFFF' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_585d01e7-4516-459d-9897-30f039768e0a_c2)'>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89' fill='#FFFFFF' stroke='none'/>\n   <rect x='27.23' y='19.11' width='2.2' height='272.63' fill='#BC97FF' stroke='none' title='-0.417658771666667'/>\n   <rect x='29.43' y='19.11' width='2.2' height='272.63' fill='#DCC4FF' stroke='none' title='-0.233349803666667'/>\n   <rect x='31.63' y='19.11' width='2.2' height='272.63' fill='#DDC5FF' stroke='none' title='-0.229399066291667'/>\n   <rect x='33.83' y='19.11' width='2.2' height='272.63' fill='#D6BBFF' stroke='none' title='-0.27035444025'/>\n   <rect x='36.03' y='19.11' width='2.2' height='272.63' fill='#D2B6FF' stroke='none' title='-0.291630035'/>\n   <rect x='38.22' y='19.11' width='2.2' height='272.63' fill='#D1B5FF' stroke='none' title='-0.296951209166667'/>\n   <rect x='40.42' y='19.11' width='2.2' height='272.63' fill='#CEAFFF' stroke='none' title='-0.320353711333333'/>\n   <rect x='42.62' y='19.11' width='2.2' height='272.63' fill='#B38BFF' stroke='none' title='-0.467230041666667'/>\n   <rect x='44.82' y='19.11' width='2.2' height='272.63' fill='#C19EFF' stroke='none' title='-0.388765681666667'/>\n   <rect x='47.01' y='19.11' width='2.2' height='272.63' fill='#D4B9FF' stroke='none' title='-0.28119545'/>\n   <rect x='49.21' y='19.11' width='2.2' height='272.63' fill='#C19EFF' stroke='none' title='-0.390165176666667'/>\n   <rect x='51.41' y='19.11' width='2.2' height='272.63' fill='#BA94FF' stroke='none' title='-0.429277112166667'/>\n   <rect x='53.61' y='19.11' width='2.2' height='272.63' fill='#A57AFF' stroke='none' title='-0.5363977375'/>\n   <rect x='55.81' y='19.11' width='2.2' height='272.63' fill='#C9A9FF' stroke='none' title='-0.344343199166667'/>\n   <rect x='58' y='19.11' width='2.2' height='272.63' fill='#B38BFF' stroke='none' title='-0.465436714166667'/>\n   <rect x='60.21' y='19.11' width='2.2' height='272.63' fill='#CBACFF' stroke='none' title='-0.332587849166667'/>\n   <rect x='62.4' y='19.11' width='2.2' height='272.63' fill='#CAAAFF' stroke='none' title='-0.341260646666667'/>\n   <rect x='64.6' y='19.11' width='2.2' height='272.63' fill='#C7A6FF' stroke='none' title='-0.35696334'/>\n   <rect x='66.8' y='19.11' width='2.2' height='272.63' fill='#C8A7FF' stroke='none' title='-0.351960707666667'/>\n   <rect x='69' y='19.11' width='2.2' height='272.63' fill='#CEB0FF' stroke='none' title='-0.3165704375'/>\n   <rect x='71.2' y='19.11' width='2.2' height='272.63' fill='#CCADFF' stroke='none' title='-0.32789085625'/>\n   <rect x='73.39' y='19.11' width='2.2' height='272.63' fill='#C5A3FF' stroke='none' title='-0.368580712833333'/>\n   <rect x='75.59' y='19.11' width='2.2' height='272.63' fill='#CCADFF' stroke='none' title='-0.328041969833333'/>\n   <rect x='77.79' y='19.11' width='2.2' height='272.63' fill='#CAAAFF' stroke='none' title='-0.3413323425'/>\n   <rect x='79.99' y='19.11' width='2.2' height='272.63' fill='#C4A2FF' stroke='none' title='-0.3732511875'/>\n   <rect x='82.19' y='19.11' width='2.2' height='272.63' fill='#C4A1FF' stroke='none' title='-0.375625949166667'/>\n   <rect x='84.38' y='19.11' width='2.2' height='272.63' fill='#BB96FF' stroke='none' title='-0.424109924166667'/>\n   <rect x='86.58' y='19.11' width='2.2' height='272.63' fill='#F0E5FF' stroke='none' title='-0.10110883075'/>\n   <rect x='88.78' y='19.11' width='2.2' height='272.63' fill='#FDFCFF' stroke='none' title='-0.0113151930833333'/>\n   <rect x='90.98' y='19.11' width='2.2' height='272.63' fill='#D0B3FF' stroke='none' title='-0.30363432'/>\n   <rect x='93.17' y='19.11' width='2.2' height='272.63' fill='#CEB0FF' stroke='none' title='-0.315832076666667'/>\n   <rect x='95.38' y='19.11' width='2.2' height='272.63' fill='#DCC5FF' stroke='none' title='-0.2322455175'/>\n   <rect x='97.57' y='19.11' width='2.2' height='272.63' fill='#D2B5FF' stroke='none' title='-0.295530093583333'/>\n   <rect x='99.77' y='19.11' width='2.2' height='272.63' fill='#C9A9FF' stroke='none' title='-0.346474406666667'/>\n   <rect x='101.97' y='19.11' width='2.2' height='272.63' fill='#AE85FF' stroke='none' title='-0.492320081666667'/>\n   <rect x='104.17' y='19.11' width='2.2' height='272.63' fill='#B28AFF' stroke='none' title='-0.471123578333333'/>\n   <rect x='106.37' y='19.11' width='2.2' height='272.63' fill='#BC96FF' stroke='none' title='-0.420903605833333'/>\n   <rect x='108.56' y='19.11' width='2.2' height='272.63' fill='#AC83FF' stroke='none' title='-0.498785775833333'/>\n   <rect x='110.76' y='19.11' width='2.2' height='272.63' fill='#C3A0FF' stroke='none' title='-0.3793788875'/>\n   <rect x='112.96' y='19.11' width='2.2' height='272.63' fill='#D9C0FF' stroke='none' title='-0.24989555575'/>\n   <rect x='115.16' y='19.11' width='2.2' height='272.63' fill='#AB81FF' stroke='none' title='-0.506858168333333'/>\n   <rect x='117.36' y='19.11' width='2.2' height='272.63' fill='#BF9BFF' stroke='none' title='-0.401314940833333'/>\n   <rect x='119.55' y='19.11' width='2.2' height='272.63' fill='#AB81FF' stroke='none' title='-0.507558540833333'/>\n   <rect x='121.76' y='19.11' width='2.2' height='272.63' fill='#AD84FF' stroke='none' title='-0.49461924'/>\n   <rect x='123.95' y='19.11' width='2.2' height='272.63' fill='#AF87FF' stroke='none' title='-0.483763925833333'/>\n   <rect x='126.15' y='19.11' width='2.2' height='272.63' fill='#B690FF' stroke='none' title='-0.448751604166667'/>\n   <rect x='128.35' y='19.11' width='2.2' height='272.63' fill='#D4B8FF' stroke='none' title='-0.284007288416667'/>\n   <rect x='130.55' y='19.11' width='2.2' height='272.63' fill='#D8BEFF' stroke='none' title='-0.259800163333333'/>\n   <rect x='132.74' y='19.11' width='2.2' height='272.63' fill='#AF86FF' stroke='none' title='-0.485792123333333'/>\n   <rect x='134.94' y='19.11' width='2.2' height='272.63' fill='#C7A6FF' stroke='none' title='-0.3554336465'/>\n   <rect x='137.14' y='19.11' width='2.2' height='272.63' fill='#DCC4FF' stroke='none' title='-0.2344790325'/>\n   <rect x='139.33' y='19.11' width='2.2' height='272.63' fill='#D2B6FF' stroke='none' title='-0.2934285575'/>\n   <rect x='141.53' y='19.11' width='2.2' height='272.63' fill='#B892FF' stroke='none' title='-0.438984285'/>\n   <rect x='143.73' y='19.11' width='2.2' height='272.63' fill='#A57BFF' stroke='none' title='-0.533326396666667'/>\n   <rect x='145.92' y='19.11' width='2.2' height='272.63' fill='#976BFF' stroke='none' title='-0.597561425833333'/>\n   <rect x='148.13' y='19.11' width='2.2' height='272.63' fill='#BE9AFF' stroke='none' title='-0.407751335833333'/>\n   <rect x='150.32' y='19.11' width='2.2' height='272.63' fill='#CEAFFF' stroke='none' title='-0.3191393125'/>\n   <rect x='152.52' y='19.11' width='2.2' height='272.63' fill='#AB82FF' stroke='none' title='-0.504157703333333'/>\n   <rect x='154.72' y='19.11' width='2.2' height='272.63' fill='#A980FF' stroke='none' title='-0.513870729166667'/>\n   <rect x='156.92' y='19.11' width='2.2' height='272.63' fill='#A57AFF' stroke='none' title='-0.535764875'/>\n   <rect x='159.12' y='19.11' width='2.2' height='272.63' fill='#A67BFF' stroke='none' title='-0.531024215'/>\n   <rect x='161.31' y='19.11' width='2.2' height='272.63' fill='#A479FF' stroke='none' title='-0.539205105833333'/>\n   <rect x='163.51' y='19.11' width='2.2' height='272.63' fill='#B189FF' stroke='none' title='-0.475673025'/>\n   <rect x='165.71' y='19.11' width='2.2' height='272.63' fill='#B38BFF' stroke='none' title='-0.467152528333333'/>\n   <rect x='167.91' y='19.11' width='2.2' height='272.63' fill='#D7BDFF' stroke='none' title='-0.262592417416667'/>\n   <rect x='170.11' y='19.11' width='2.2' height='272.63' fill='#E3CFFF' stroke='none' title='-0.1918439175'/>\n   <rect x='172.3' y='19.11' width='2.2' height='272.63' fill='#BC96FF' stroke='none' title='-0.420209973333333'/>\n   <rect x='174.51' y='19.11' width='2.2' height='272.63' fill='#A378FF' stroke='none' title='-0.543019525'/>\n   <rect x='176.7' y='19.11' width='2.2' height='272.63' fill='#BB95FF' stroke='none' title='-0.424584334166667'/>\n   <rect x='178.9' y='19.11' width='2.2' height='272.63' fill='#CDAEFF' stroke='none' title='-0.325518225'/>\n   <rect x='181.09' y='19.11' width='2.2' height='272.63' fill='#D1B4FF' stroke='none' title='-0.2985807875'/>\n   <rect x='183.3' y='19.11' width='2.2' height='272.63' fill='#DBC3FF' stroke='none' title='-0.2406770375'/>\n   <rect x='185.49' y='19.11' width='2.2' height='272.63' fill='#CAAAFF' stroke='none' title='-0.339228118333333'/>\n   <rect x='187.69' y='19.11' width='2.2' height='272.63' fill='#CEB0FF' stroke='none' title='-0.317930558333333'/>\n   <rect x='189.89' y='19.11' width='2.2' height='272.63' fill='#CFB1FF' stroke='none' title='-0.312062216666667'/>\n   <rect x='192.09' y='19.11' width='2.2' height='272.63' fill='#D4B8FF' stroke='none' title='-0.282425270833333'/>\n   <rect x='194.29' y='19.11' width='2.2' height='272.63' fill='#EDE0FF' stroke='none' title='-0.122835470083333'/>\n   <rect x='196.48' y='19.11' width='2.2' height='272.63' fill='#DDC5FF' stroke='none' title='-0.229405073333333'/>\n   <rect x='198.68' y='19.11' width='2.2' height='272.63' fill='#E0CBFF' stroke='none' title='-0.206761556583333'/>\n   <rect x='200.88' y='19.11' width='2.2' height='272.63' fill='#C19DFF' stroke='none' title='-0.392756630833333'/>\n   <rect x='203.08' y='19.11' width='2.2' height='272.63' fill='#E5D3FF' stroke='none' title='-0.1768053975'/>\n   <rect x='205.28' y='19.11' width='2.2' height='272.63' fill='#F0E5FF' stroke='none' title='-0.103397681916667'/>\n   <rect x='207.47' y='19.11' width='2.2' height='272.63' fill='#EADAFF' stroke='none' title='-0.14546167352'/>\n   <rect x='209.68' y='19.11' width='2.2' height='272.63' fill='#CDAEFF' stroke='none' title='-0.322344405833333'/>\n   <rect x='211.87' y='19.11' width='2.2' height='272.63' fill='#E5D3FF' stroke='none' title='-0.174336850083333'/>\n   <rect x='214.07' y='19.11' width='2.2' height='272.63' fill='#E0CBFF' stroke='none' title='-0.20605922625'/>\n   <rect x='216.27' y='19.11' width='2.2' height='272.63' fill='#E6D4FF' stroke='none' title='-0.1695209325'/>\n   <rect x='218.47' y='19.11' width='2.2' height='272.63' fill='#FCFAFF' stroke='none' title='-0.0191989290833333'/>\n   <rect x='220.66' y='19.11' width='2.2' height='272.63' fill='#FDFCFF' stroke='none' title='-0.0122007315666667'/>\n   <rect x='222.86' y='19.11' width='2.2' height='272.63' fill='#F9F5FF' stroke='none' title='-0.0407971648333333'/>\n   <rect x='225.06' y='19.11' width='2.2' height='272.63' fill='#FFEFEA' stroke='none' title='0.0759358432166667'/>\n   <rect x='227.26' y='19.11' width='2.2' height='272.63' fill='#FFF7F4' stroke='none' title='0.0381293381666667'/>\n   <rect x='229.46' y='19.11' width='2.2' height='272.63' fill='#FFFFFF' stroke='none' title='0.00140609175'/>\n   <rect x='231.65' y='19.11' width='2.2' height='272.63' fill='#FFFEFD' stroke='none' title='0.00641407516666667'/>\n   <rect x='233.85' y='19.11' width='2.2' height='272.63' fill='#FFE2D7' stroke='none' title='0.144105132166667'/>\n   <rect x='236.05' y='19.11' width='2.2' height='272.63' fill='#FFF6F3' stroke='none' title='0.0430883625308333'/>\n   <rect x='238.25' y='19.11' width='2.2' height='272.63' fill='#EEE1FF' stroke='none' title='-0.118812796916667'/>\n   <rect x='240.45' y='19.11' width='2.2' height='272.63' fill='#F2E8FF' stroke='none' title='-0.091205548'/>\n   <rect x='242.64' y='19.11' width='2.2' height='272.63' fill='#EDE0FF' stroke='none' title='-0.124661271833333'/>\n   <rect x='244.85' y='19.11' width='2.2' height='272.63' fill='#EADBFF' stroke='none' title='-0.143802242416667'/>\n   <rect x='247.04' y='19.11' width='2.2' height='272.63' fill='#DDC6FF' stroke='none' title='-0.226621795333333'/>\n   <rect x='249.24' y='19.11' width='2.2' height='272.63' fill='#F6F0FF' stroke='none' title='-0.0611539726666667'/>\n   <rect x='251.44' y='19.11' width='2.2' height='272.63' fill='#FFFCFB' stroke='none' title='0.0153545635833333'/>\n   <rect x='253.64' y='19.11' width='2.2' height='272.63' fill='#FFEFE9' stroke='none' title='0.0776307447'/>\n   <rect x='255.84' y='19.11' width='2.2' height='272.63' fill='#EEE2FF' stroke='none' title='-0.11675021175'/>\n   <rect x='258.03' y='19.11' width='2.2' height='272.63' fill='#E2CDFF' stroke='none' title='-0.197309924166667'/>\n   <rect x='260.23' y='19.11' width='2.2' height='272.63' fill='#D7BDFF' stroke='none' title='-0.2631656'/>\n   <rect x='262.43' y='19.11' width='2.2' height='272.63' fill='#FAF6FF' stroke='none' title='-0.035334925575'/>\n   <rect x='264.63' y='19.11' width='2.2' height='272.63' fill='#FDFBFF' stroke='none' title='-0.0176325520416667'/>\n   <rect x='266.82' y='19.11' width='2.2' height='272.63' fill='#F8F3FF' stroke='none' title='-0.0480048261333333'/>\n   <rect x='269.02' y='19.11' width='2.2' height='272.63' fill='#EEE2FF' stroke='none' title='-0.115487027483333'/>\n   <rect x='271.22' y='19.11' width='2.2' height='272.63' fill='#FCFAFF' stroke='none' title='-0.0199973898333333'/>\n   <rect x='273.42' y='19.11' width='2.2' height='272.63' fill='#F6EFFF' stroke='none' title='-0.06405444025'/>\n   <rect x='275.62' y='19.11' width='2.2' height='272.63' fill='#FAF6FF' stroke='none' title='-0.0368058915833333'/>\n   <rect x='277.81' y='19.11' width='2.2' height='272.63' fill='#D0B3FF' stroke='none' title='-0.305866745833333'/>\n   <rect x='280.02' y='19.11' width='2.2' height='272.63' fill='#E1CCFF' stroke='none' title='-0.204387895833333'/>\n   <rect x='282.21' y='19.11' width='2.2' height='272.63' fill='#E9D9FF' stroke='none' title='-0.148884587625'/>\n   <rect x='284.41' y='19.11' width='2.2' height='272.63' fill='#EEE1FF' stroke='none' title='-0.117516308333333'/>\n   <rect x='286.61' y='19.11' width='2.2' height='272.63' fill='#E6D5FF' stroke='none' title='-0.168632295916667'/>\n   <rect x='288.81' y='19.11' width='2.2' height='272.63' fill='#FBF7FF' stroke='none' title='-0.0313667128133333'/>\n   <rect x='291.01' y='19.11' width='2.2' height='272.63' fill='#F3E9FF' stroke='none' title='-0.0851065664166667'/>\n   <rect x='293.2' y='19.11' width='2.2' height='272.63' fill='#E0CBFF' stroke='none' title='-0.2059327425'/>\n   <rect x='295.4' y='19.11' width='2.2' height='272.63' fill='#F2E7FF' stroke='none' title='-0.09382709875'/>\n   <rect x='297.6' y='19.11' width='2.2' height='272.63' fill='#FFF5F1' stroke='none' title='0.0499333559583333'/>\n   <rect x='299.8' y='19.11' width='2.2' height='272.63' fill='#E6D4FF' stroke='none' title='-0.172537334416667'/>\n   <rect x='302' y='19.11' width='2.2' height='272.63' fill='#EFE3FF' stroke='none' title='-0.110754240333333'/>\n   <rect x='304.19' y='19.11' width='2.2' height='272.63' fill='#DFC9FF' stroke='none' title='-0.215861670833333'/>\n   <rect x='306.39' y='19.11' width='2.2' height='272.63' fill='#FFEAE2' stroke='none' title='0.103088523766667'/>\n   <rect x='308.59' y='19.11' width='2.2' height='272.63' fill='#FFFEFE' stroke='none' title='0.005255772875'/>\n   <rect x='310.79' y='19.11' width='2.2' height='272.63' fill='#FFECE6' stroke='none' title='0.09085813125'/>\n   <rect x='312.98' y='19.11' width='2.2' height='272.63' fill='#FFD7C9' stroke='none' title='0.196072068833333'/>\n   <rect x='315.19' y='19.11' width='2.2' height='272.63' fill='#FFCCBA' stroke='none' title='0.250012034166667'/>\n   <rect x='317.38' y='19.11' width='2.2' height='272.63' fill='#FFF8F5' stroke='none' title='0.0342633246833333'/>\n   <rect x='319.58' y='19.11' width='2.2' height='272.63' fill='#FFD1C1' stroke='none' title='0.223838615416667'/>\n   <rect x='321.78' y='19.11' width='2.2' height='272.63' fill='#FFF5F2' stroke='none' title='0.0480047095833333'/>\n   <rect x='323.98' y='19.11' width='2.2' height='272.63' fill='#FFF5F1' stroke='none' title='0.0497297826916667'/>\n   <rect x='326.18' y='19.11' width='2.2' height='272.63' fill='#FFEBE4' stroke='none' title='0.0956869755833333'/>\n   <rect x='328.37' y='19.11' width='2.2' height='272.63' fill='#FFCDBC' stroke='none' title='0.24302639875'/>\n   <rect x='330.57' y='19.11' width='2.2' height='272.63' fill='#FFC5B2' stroke='none' title='0.28215173025'/>\n   <rect x='332.77' y='19.11' width='2.2' height='272.63' fill='#FFDACD' stroke='none' title='0.179250260583333'/>\n   <rect x='334.97' y='19.11' width='2.2' height='272.63' fill='#FFB59D' stroke='none' title='0.360562465'/>\n   <rect x='337.17' y='19.11' width='2.2' height='272.63' fill='#FFB9A3' stroke='none' title='0.338896530833333'/>\n   <rect x='339.36' y='19.11' width='2.2' height='272.63' fill='#FFE5DC' stroke='none' title='0.124896793833333'/>\n   <rect x='341.57' y='19.11' width='2.2' height='272.63' fill='#FFDDD1' stroke='none' title='0.165658464166667'/>\n   <rect x='343.76' y='19.11' width='2.2' height='272.63' fill='#FFCFBF' stroke='none' title='0.233549770083333'/>\n   <rect x='345.96' y='19.11' width='2.2' height='272.63' fill='#FFB199' stroke='none' title='0.376866154166667'/>\n   <rect x='348.16' y='19.11' width='2.2' height='272.63' fill='#FFC6B3' stroke='none' title='0.276689415'/>\n   <rect x='350.36' y='19.11' width='2.2' height='272.63' fill='#FFA78D' stroke='none' title='0.422308513333333'/>\n   <rect x='352.55' y='19.11' width='2.2' height='272.63' fill='#FF8565' stroke='none' title='0.577316480833333'/>\n   <rect x='354.75' y='19.11' width='2.2' height='272.63' fill='#FFBCA6' stroke='none' title='0.324484960833333'/>\n   <rect x='356.95' y='19.11' width='2.2' height='272.63' fill='#FFBBA5' stroke='none' title='0.331084788333333'/>\n   <rect x='359.15' y='19.11' width='2.2' height='272.63' fill='#FF997B' stroke='none' title='0.489280358333333'/>\n   <rect x='361.35' y='19.11' width='2.2' height='272.63' fill='#FF8D6E' stroke='none' title='0.5434664925'/>\n   <rect x='363.54' y='19.11' width='2.2' height='272.63' fill='#FF8D6D' stroke='none' title='0.54417018'/>\n   <rect x='365.74' y='19.11' width='2.2' height='272.63' fill='#FF9E81' stroke='none' title='0.467370724166667'/>\n   <rect x='367.94' y='19.11' width='2.2' height='272.63' fill='#FF7E5E' stroke='none' title='0.606862563333333'/>\n   <rect x='370.14' y='19.11' width='2.2' height='272.63' fill='#FF8666' stroke='none' title='0.572552691666667'/>\n   <rect x='372.34' y='19.11' width='2.2' height='272.63' fill='#FF8261' stroke='none' title='0.591701325833333'/>\n   <rect x='374.53' y='19.11' width='2.2' height='272.63' fill='#FF9E81' stroke='none' title='0.465649843333333'/>\n   <rect x='376.74' y='19.11' width='2.2' height='272.63' fill='#FF8160' stroke='none' title='0.596781645833333'/>\n   <rect x='378.93' y='19.11' width='2.2' height='272.63' fill='#FF6C4B' stroke='none' title='0.680371434166667'/>\n   <rect x='381.13' y='19.11' width='2.2' height='272.63' fill='#FF8E6F' stroke='none' title='0.537697725'/>\n   <rect x='383.33' y='19.11' width='2.2' height='272.63' fill='#FF8565' stroke='none' title='0.577607075'/>\n   <rect x='385.53' y='19.11' width='2.2' height='272.63' fill='#FF7A59' stroke='none' title='0.6235753575'/>\n   <rect x='387.72' y='19.11' width='2.2' height='272.63' fill='#FF6E4D' stroke='none' title='0.672871651666667'/>\n   <rect x='389.92' y='19.11' width='2.2' height='272.63' fill='#FF4326' stroke='none' title='0.82511439'/>\n   <rect x='392.12' y='19.11' width='2.2' height='272.63' fill='#FF0000' stroke='none' title='0.932927135833333'/>\n   <rect x='394.32' y='19.11' width='2.2' height='272.63' fill='#FF3C20' stroke='none' title='0.845174261666667'/>\n   <rect x='396.52' y='19.11' width='2.2' height='272.63' fill='#FF5636' stroke='none' title='0.76265403'/>\n   <rect x='398.71' y='19.11' width='2.2' height='272.63' fill='#FF2711' stroke='none' title='0.891072609166667'/>\n   <rect x='400.91' y='19.11' width='2.2' height='272.63' fill='#FF0F04' stroke='none' title='0.922793786666667'/>\n   <rect x='403.11' y='19.11' width='2.2' height='272.63' fill='#FF5736' stroke='none' title='0.761855908333333'/>\n   <rect x='405.31' y='19.11' width='2.2' height='272.63' fill='#FF4A2B' stroke='none' title='0.80488629'/>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89' fill='none' stroke='#B3B3B3' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_585d01e7-4516-459d-9897-30f039768e0a_c1)'>\n   <polyline points='28.33,308.11 28.33,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='138.24,308.11 138.24,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='248.14,308.11 248.14,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='358.05,308.11 358.05,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='18.54' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1850<\/text>\n   <text x='128.44' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1900<\/text>\n   <text x='238.35' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1950<\/text>\n   <text x='348.25' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>2000<\/text>\n   <text x='206.25' y='329.07' font-size='8.25pt' font-family='Arial'>Year<\/text>\n   <text x='334.56' y='343.17' font-size='6.6pt' font-family='Arial'>Inspired by Ed Hawkins<\/text>\n   <text x='330.79' y='352.67' font-size='6.6pt' font-family='Arial'>Data from the Met Office<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_585d01e7-4516-459d-9897-30f039768e0a","ratio":1.2,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px 2px 2px 2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","offx":10,"offy":0,"use_cursor_pos":true,"opacity":0.9,"usefill":false,"usestroke":false,"delay":{"over":200,"out":500}},"hover":{"css":".hover_SVGID_ { fill:orange;stroke:gray; }","reactive":false},"hoverkey":{"css":".hover_key_SVGID_ { stroke:red; }","reactive":false},"hovertheme":{"css":".hover_theme_SVGID_ { fill:green; }","reactive":false},"hoverinv":{"css":""},"zoom":{"min":1,"max":1},"capture":{"css":".selected_SVGID_ { fill:red;stroke:gray; }","type":"multiple","only_shiny":true,"selected":[]},"capturekey":{"css":".selected_key_SVGID_ { stroke:gray; }","type":"single","only_shiny":true,"selected":[]},"capturetheme":{"css":".selected_theme_SVGID_ { stroke:gray; }","type":"single","only_shiny":true,"selected":[]},"toolbar":{"position":"top","saveaspng":false,"pngname":"diagram"},"sizing":{"rescale":true,"width":0.75}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We can improve this interactive figure by rounding off the temperature anomaly value, and adding some context to our tooltip:</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">anomaly_deg_c</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>         tooltip <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"Degree deviation from base period in "</span>, <span class="va">year</span>, <span class="st">"\n"</span>, <span class="va">tooltip</span>, <span class="st">" c"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">time</span>, y <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span>, tooltip <span class="op">=</span> <span class="va">tooltip</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://davidgohel.github.io/ggiraph/reference/geom_rect_interactive.html">geom_tile_interactive</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"pink"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Inspired by Ed Hawkins\nData from the Met Office"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">g_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://davidgohel.github.io/ggiraph/reference/ggiraph.html">ggiraph</a></span><span class="op">(</span>ggobj <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g_out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-bb90b4e7e74b59fc274c" style="width:100%;height:464px;" class="girafe html-widget"></div>
<script type="application/json" data-for="htmlwidget-bb90b4e7e74b59fc274c">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' id='svg_5fb82fd4-c032-4411-957b-c48c3ccd750b' viewBox='0 0 432 360'>\n <defs>\n  <clipPath id='svg_5fb82fd4-c032-4411-957b-c48c3ccd750b_c1'>\n   <rect x='0' y='0' width='432' height='360'/>\n  <\/clipPath>\n  <clipPath id='svg_5fb82fd4-c032-4411-957b-c48c3ccd750b_c2'>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89'/>\n  <\/clipPath>\n <\/defs>\n <g>\n  <g clip-path='url(#svg_5fb82fd4-c032-4411-957b-c48c3ccd750b_c1)'>\n   <rect x='0' y='0' width='432' height='360' fill='#FFFFFF' stroke='#FFFFFF' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round'/>\n   <rect x='0' y='0' width='432' height='360' fill='#FFFFFF' stroke='#FFFFFF' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_5fb82fd4-c032-4411-957b-c48c3ccd750b_c2)'>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89' fill='#FFFFFF' stroke='none'/>\n   <rect x='27.23' y='19.11' width='2.2' height='272.63' fill='#BE73E5' stroke='none' title='Degree deviation from base period in 1850&amp;lt;br/&amp;gt;-0.42 c'/>\n   <rect x='29.43' y='19.11' width='2.2' height='272.63' fill='#DD95DA' stroke='none' title='Degree deviation from base period in 1851&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='31.63' y='19.11' width='2.2' height='272.63' fill='#DD96DA' stroke='none' title='Degree deviation from base period in 1852&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='33.83' y='19.11' width='2.2' height='272.63' fill='#D78EDD' stroke='none' title='Degree deviation from base period in 1853&amp;lt;br/&amp;gt;-0.27 c'/>\n   <rect x='36.03' y='19.11' width='2.2' height='272.63' fill='#D38ADE' stroke='none' title='Degree deviation from base period in 1854&amp;lt;br/&amp;gt;-0.29 c'/>\n   <rect x='38.22' y='19.11' width='2.2' height='272.63' fill='#D289DE' stroke='none' title='Degree deviation from base period in 1855&amp;lt;br/&amp;gt;-0.3 c'/>\n   <rect x='40.42' y='19.11' width='2.2' height='272.63' fill='#CF85DF' stroke='none' title='Degree deviation from base period in 1856&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='42.62' y='19.11' width='2.2' height='272.63' fill='#B46AE8' stroke='none' title='Degree deviation from base period in 1857&amp;lt;br/&amp;gt;-0.47 c'/>\n   <rect x='44.82' y='19.11' width='2.2' height='272.63' fill='#C378E3' stroke='none' title='Degree deviation from base period in 1858&amp;lt;br/&amp;gt;-0.39 c'/>\n   <rect x='47.01' y='19.11' width='2.2' height='272.63' fill='#D58CDD' stroke='none' title='Degree deviation from base period in 1859&amp;lt;br/&amp;gt;-0.28 c'/>\n   <rect x='49.21' y='19.11' width='2.2' height='272.63' fill='#C378E3' stroke='none' title='Degree deviation from base period in 1860&amp;lt;br/&amp;gt;-0.39 c'/>\n   <rect x='51.41' y='19.11' width='2.2' height='272.63' fill='#BC71E6' stroke='none' title='Degree deviation from base period in 1861&amp;lt;br/&amp;gt;-0.43 c'/>\n   <rect x='53.61' y='19.11' width='2.2' height='272.63' fill='#A75DEB' stroke='none' title='Degree deviation from base period in 1862&amp;lt;br/&amp;gt;-0.54 c'/>\n   <rect x='55.81' y='19.11' width='2.2' height='272.63' fill='#CB80E1' stroke='none' title='Degree deviation from base period in 1863&amp;lt;br/&amp;gt;-0.34 c'/>\n   <rect x='58' y='19.11' width='2.2' height='272.63' fill='#B56AE8' stroke='none' title='Degree deviation from base period in 1864&amp;lt;br/&amp;gt;-0.47 c'/>\n   <rect x='60.21' y='19.11' width='2.2' height='272.63' fill='#CD83E0' stroke='none' title='Degree deviation from base period in 1865&amp;lt;br/&amp;gt;-0.33 c'/>\n   <rect x='62.4' y='19.11' width='2.2' height='272.63' fill='#CB81E1' stroke='none' title='Degree deviation from base period in 1866&amp;lt;br/&amp;gt;-0.34 c'/>\n   <rect x='64.6' y='19.11' width='2.2' height='272.63' fill='#C87EE2' stroke='none' title='Degree deviation from base period in 1867&amp;lt;br/&amp;gt;-0.36 c'/>\n   <rect x='66.8' y='19.11' width='2.2' height='272.63' fill='#C97FE1' stroke='none' title='Degree deviation from base period in 1868&amp;lt;br/&amp;gt;-0.35 c'/>\n   <rect x='69' y='19.11' width='2.2' height='272.63' fill='#CF86DF' stroke='none' title='Degree deviation from base period in 1869&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='71.2' y='19.11' width='2.2' height='272.63' fill='#CD83E0' stroke='none' title='Degree deviation from base period in 1870&amp;lt;br/&amp;gt;-0.33 c'/>\n   <rect x='73.39' y='19.11' width='2.2' height='272.63' fill='#C67CE2' stroke='none' title='Degree deviation from base period in 1871&amp;lt;br/&amp;gt;-0.37 c'/>\n   <rect x='75.59' y='19.11' width='2.2' height='272.63' fill='#CD83E0' stroke='none' title='Degree deviation from base period in 1872&amp;lt;br/&amp;gt;-0.33 c'/>\n   <rect x='77.79' y='19.11' width='2.2' height='272.63' fill='#CB81E1' stroke='none' title='Degree deviation from base period in 1873&amp;lt;br/&amp;gt;-0.34 c'/>\n   <rect x='79.99' y='19.11' width='2.2' height='272.63' fill='#C67BE2' stroke='none' title='Degree deviation from base period in 1874&amp;lt;br/&amp;gt;-0.37 c'/>\n   <rect x='82.19' y='19.11' width='2.2' height='272.63' fill='#C57BE3' stroke='none' title='Degree deviation from base period in 1875&amp;lt;br/&amp;gt;-0.38 c'/>\n   <rect x='84.38' y='19.11' width='2.2' height='272.63' fill='#BC72E5' stroke='none' title='Degree deviation from base period in 1876&amp;lt;br/&amp;gt;-0.42 c'/>\n   <rect x='86.58' y='19.11' width='2.2' height='272.63' fill='#F1ADD2' stroke='none' title='Degree deviation from base period in 1877&amp;lt;br/&amp;gt;-0.1 c'/>\n   <rect x='88.78' y='19.11' width='2.2' height='272.63' fill='#FDBECC' stroke='none' title='Degree deviation from base period in 1878&amp;lt;br/&amp;gt;-0.01 c'/>\n   <rect x='90.98' y='19.11' width='2.2' height='272.63' fill='#D188DE' stroke='none' title='Degree deviation from base period in 1879&amp;lt;br/&amp;gt;-0.3 c'/>\n   <rect x='93.17' y='19.11' width='2.2' height='272.63' fill='#CF86DF' stroke='none' title='Degree deviation from base period in 1880&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='95.38' y='19.11' width='2.2' height='272.63' fill='#DD95DA' stroke='none' title='Degree deviation from base period in 1881&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='97.57' y='19.11' width='2.2' height='272.63' fill='#D389DE' stroke='none' title='Degree deviation from base period in 1882&amp;lt;br/&amp;gt;-0.3 c'/>\n   <rect x='99.77' y='19.11' width='2.2' height='272.63' fill='#CA80E1' stroke='none' title='Degree deviation from base period in 1883&amp;lt;br/&amp;gt;-0.35 c'/>\n   <rect x='101.97' y='19.11' width='2.2' height='272.63' fill='#B065E9' stroke='none' title='Degree deviation from base period in 1884&amp;lt;br/&amp;gt;-0.49 c'/>\n   <rect x='104.17' y='19.11' width='2.2' height='272.63' fill='#B469E8' stroke='none' title='Degree deviation from base period in 1885&amp;lt;br/&amp;gt;-0.47 c'/>\n   <rect x='106.37' y='19.11' width='2.2' height='272.63' fill='#BD72E5' stroke='none' title='Degree deviation from base period in 1886&amp;lt;br/&amp;gt;-0.42 c'/>\n   <rect x='108.56' y='19.11' width='2.2' height='272.63' fill='#AE64E9' stroke='none' title='Degree deviation from base period in 1887&amp;lt;br/&amp;gt;-0.5 c'/>\n   <rect x='110.76' y='19.11' width='2.2' height='272.63' fill='#C47AE3' stroke='none' title='Degree deviation from base period in 1888&amp;lt;br/&amp;gt;-0.38 c'/>\n   <rect x='112.96' y='19.11' width='2.2' height='272.63' fill='#DA92DB' stroke='none' title='Degree deviation from base period in 1889&amp;lt;br/&amp;gt;-0.25 c'/>\n   <rect x='115.16' y='19.11' width='2.2' height='272.63' fill='#AD63EA' stroke='none' title='Degree deviation from base period in 1890&amp;lt;br/&amp;gt;-0.51 c'/>\n   <rect x='117.36' y='19.11' width='2.2' height='272.63' fill='#C176E4' stroke='none' title='Degree deviation from base period in 1891&amp;lt;br/&amp;gt;-0.4 c'/>\n   <rect x='119.55' y='19.11' width='2.2' height='272.63' fill='#AD62EA' stroke='none' title='Degree deviation from base period in 1892&amp;lt;br/&amp;gt;-0.51 c'/>\n   <rect x='121.76' y='19.11' width='2.2' height='272.63' fill='#AF65E9' stroke='none' title='Degree deviation from base period in 1893&amp;lt;br/&amp;gt;-0.49 c'/>\n   <rect x='123.95' y='19.11' width='2.2' height='272.63' fill='#B167E9' stroke='none' title='Degree deviation from base period in 1894&amp;lt;br/&amp;gt;-0.48 c'/>\n   <rect x='126.15' y='19.11' width='2.2' height='272.63' fill='#B86DE7' stroke='none' title='Degree deviation from base period in 1895&amp;lt;br/&amp;gt;-0.45 c'/>\n   <rect x='128.35' y='19.11' width='2.2' height='272.63' fill='#D58CDD' stroke='none' title='Degree deviation from base period in 1896&amp;lt;br/&amp;gt;-0.28 c'/>\n   <rect x='130.55' y='19.11' width='2.2' height='272.63' fill='#D890DC' stroke='none' title='Degree deviation from base period in 1897&amp;lt;br/&amp;gt;-0.26 c'/>\n   <rect x='132.74' y='19.11' width='2.2' height='272.63' fill='#B166E9' stroke='none' title='Degree deviation from base period in 1898&amp;lt;br/&amp;gt;-0.49 c'/>\n   <rect x='134.94' y='19.11' width='2.2' height='272.63' fill='#C97EE1' stroke='none' title='Degree deviation from base period in 1899&amp;lt;br/&amp;gt;-0.36 c'/>\n   <rect x='137.14' y='19.11' width='2.2' height='272.63' fill='#DC95DA' stroke='none' title='Degree deviation from base period in 1900&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='139.33' y='19.11' width='2.2' height='272.63' fill='#D38ADE' stroke='none' title='Degree deviation from base period in 1901&amp;lt;br/&amp;gt;-0.29 c'/>\n   <rect x='141.53' y='19.11' width='2.2' height='272.63' fill='#BA6FE6' stroke='none' title='Degree deviation from base period in 1902&amp;lt;br/&amp;gt;-0.44 c'/>\n   <rect x='143.73' y='19.11' width='2.2' height='272.63' fill='#A75EEB' stroke='none' title='Degree deviation from base period in 1903&amp;lt;br/&amp;gt;-0.53 c'/>\n   <rect x='145.92' y='19.11' width='2.2' height='272.63' fill='#9A52EF' stroke='none' title='Degree deviation from base period in 1904&amp;lt;br/&amp;gt;-0.6 c'/>\n   <rect x='148.13' y='19.11' width='2.2' height='272.63' fill='#BF75E4' stroke='none' title='Degree deviation from base period in 1905&amp;lt;br/&amp;gt;-0.41 c'/>\n   <rect x='150.32' y='19.11' width='2.2' height='272.63' fill='#CF85DF' stroke='none' title='Degree deviation from base period in 1906&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='152.52' y='19.11' width='2.2' height='272.63' fill='#AD63EA' stroke='none' title='Degree deviation from base period in 1907&amp;lt;br/&amp;gt;-0.5 c'/>\n   <rect x='154.72' y='19.11' width='2.2' height='272.63' fill='#AB61EA' stroke='none' title='Degree deviation from base period in 1908&amp;lt;br/&amp;gt;-0.51 c'/>\n   <rect x='156.92' y='19.11' width='2.2' height='272.63' fill='#A75DEB' stroke='none' title='Degree deviation from base period in 1909&amp;lt;br/&amp;gt;-0.54 c'/>\n   <rect x='159.12' y='19.11' width='2.2' height='272.63' fill='#A85EEB' stroke='none' title='Degree deviation from base period in 1910&amp;lt;br/&amp;gt;-0.53 c'/>\n   <rect x='161.31' y='19.11' width='2.2' height='272.63' fill='#A65DEC' stroke='none' title='Degree deviation from base period in 1911&amp;lt;br/&amp;gt;-0.54 c'/>\n   <rect x='163.51' y='19.11' width='2.2' height='272.63' fill='#B368E8' stroke='none' title='Degree deviation from base period in 1912&amp;lt;br/&amp;gt;-0.48 c'/>\n   <rect x='165.71' y='19.11' width='2.2' height='272.63' fill='#B46AE8' stroke='none' title='Degree deviation from base period in 1913&amp;lt;br/&amp;gt;-0.47 c'/>\n   <rect x='167.91' y='19.11' width='2.2' height='272.63' fill='#D88FDC' stroke='none' title='Degree deviation from base period in 1914&amp;lt;br/&amp;gt;-0.26 c'/>\n   <rect x='170.11' y='19.11' width='2.2' height='272.63' fill='#E39CD8' stroke='none' title='Degree deviation from base period in 1915&amp;lt;br/&amp;gt;-0.19 c'/>\n   <rect x='172.3' y='19.11' width='2.2' height='272.63' fill='#BD73E5' stroke='none' title='Degree deviation from base period in 1916&amp;lt;br/&amp;gt;-0.42 c'/>\n   <rect x='174.51' y='19.11' width='2.2' height='272.63' fill='#A55CEC' stroke='none' title='Degree deviation from base period in 1917&amp;lt;br/&amp;gt;-0.54 c'/>\n   <rect x='176.7' y='19.11' width='2.2' height='272.63' fill='#BC72E5' stroke='none' title='Degree deviation from base period in 1918&amp;lt;br/&amp;gt;-0.42 c'/>\n   <rect x='178.9' y='19.11' width='2.2' height='272.63' fill='#CE84E0' stroke='none' title='Degree deviation from base period in 1919&amp;lt;br/&amp;gt;-0.33 c'/>\n   <rect x='181.09' y='19.11' width='2.2' height='272.63' fill='#D289DE' stroke='none' title='Degree deviation from base period in 1920&amp;lt;br/&amp;gt;-0.3 c'/>\n   <rect x='183.3' y='19.11' width='2.2' height='272.63' fill='#DC93DB' stroke='none' title='Degree deviation from base period in 1921&amp;lt;br/&amp;gt;-0.24 c'/>\n   <rect x='185.49' y='19.11' width='2.2' height='272.63' fill='#CB81E1' stroke='none' title='Degree deviation from base period in 1922&amp;lt;br/&amp;gt;-0.34 c'/>\n   <rect x='187.69' y='19.11' width='2.2' height='272.63' fill='#CF85DF' stroke='none' title='Degree deviation from base period in 1923&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='189.89' y='19.11' width='2.2' height='272.63' fill='#D086DF' stroke='none' title='Degree deviation from base period in 1924&amp;lt;br/&amp;gt;-0.31 c'/>\n   <rect x='192.09' y='19.11' width='2.2' height='272.63' fill='#D58CDD' stroke='none' title='Degree deviation from base period in 1925&amp;lt;br/&amp;gt;-0.28 c'/>\n   <rect x='194.29' y='19.11' width='2.2' height='272.63' fill='#EDA9D3' stroke='none' title='Degree deviation from base period in 1926&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='196.48' y='19.11' width='2.2' height='272.63' fill='#DD96DA' stroke='none' title='Degree deviation from base period in 1927&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='198.68' y='19.11' width='2.2' height='272.63' fill='#E19AD9' stroke='none' title='Degree deviation from base period in 1928&amp;lt;br/&amp;gt;-0.21 c'/>\n   <rect x='200.88' y='19.11' width='2.2' height='272.63' fill='#C278E4' stroke='none' title='Degree deviation from base period in 1929&amp;lt;br/&amp;gt;-0.39 c'/>\n   <rect x='203.08' y='19.11' width='2.2' height='272.63' fill='#E59FD7' stroke='none' title='Degree deviation from base period in 1930&amp;lt;br/&amp;gt;-0.18 c'/>\n   <rect x='205.28' y='19.11' width='2.2' height='272.63' fill='#F0ADD2' stroke='none' title='Degree deviation from base period in 1931&amp;lt;br/&amp;gt;-0.1 c'/>\n   <rect x='207.47' y='19.11' width='2.2' height='272.63' fill='#EAA5D5' stroke='none' title='Degree deviation from base period in 1932&amp;lt;br/&amp;gt;-0.15 c'/>\n   <rect x='209.68' y='19.11' width='2.2' height='272.63' fill='#CE84E0' stroke='none' title='Degree deviation from base period in 1933&amp;lt;br/&amp;gt;-0.32 c'/>\n   <rect x='211.87' y='19.11' width='2.2' height='272.63' fill='#E6A0D7' stroke='none' title='Degree deviation from base period in 1934&amp;lt;br/&amp;gt;-0.17 c'/>\n   <rect x='214.07' y='19.11' width='2.2' height='272.63' fill='#E19AD9' stroke='none' title='Degree deviation from base period in 1935&amp;lt;br/&amp;gt;-0.21 c'/>\n   <rect x='216.27' y='19.11' width='2.2' height='272.63' fill='#E7A1D6' stroke='none' title='Degree deviation from base period in 1936&amp;lt;br/&amp;gt;-0.17 c'/>\n   <rect x='218.47' y='19.11' width='2.2' height='272.63' fill='#FCBCCC' stroke='none' title='Degree deviation from base period in 1937&amp;lt;br/&amp;gt;-0.02 c'/>\n   <rect x='220.66' y='19.11' width='2.2' height='272.63' fill='#FDBECC' stroke='none' title='Degree deviation from base period in 1938&amp;lt;br/&amp;gt;-0.01 c'/>\n   <rect x='222.86' y='19.11' width='2.2' height='272.63' fill='#F9B8CE' stroke='none' title='Degree deviation from base period in 1939&amp;lt;br/&amp;gt;-0.04 c'/>\n   <rect x='225.06' y='19.11' width='2.2' height='272.63' fill='#FFB5BB' stroke='none' title='Degree deviation from base period in 1940&amp;lt;br/&amp;gt;0.08 c'/>\n   <rect x='227.26' y='19.11' width='2.2' height='272.63' fill='#FFBBC3' stroke='none' title='Degree deviation from base period in 1941&amp;lt;br/&amp;gt;0.04 c'/>\n   <rect x='229.46' y='19.11' width='2.2' height='272.63' fill='#FFC0CB' stroke='none' title='Degree deviation from base period in 1942&amp;lt;br/&amp;gt;0 c'/>\n   <rect x='231.65' y='19.11' width='2.2' height='272.63' fill='#FFBFCA' stroke='none' title='Degree deviation from base period in 1943&amp;lt;br/&amp;gt;0.01 c'/>\n   <rect x='233.85' y='19.11' width='2.2' height='272.63' fill='#FFACAC' stroke='none' title='Degree deviation from base period in 1944&amp;lt;br/&amp;gt;0.14 c'/>\n   <rect x='236.05' y='19.11' width='2.2' height='272.63' fill='#FFBAC2' stroke='none' title='Degree deviation from base period in 1945&amp;lt;br/&amp;gt;0.04 c'/>\n   <rect x='238.25' y='19.11' width='2.2' height='272.63' fill='#EEAAD3' stroke='none' title='Degree deviation from base period in 1946&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='240.45' y='19.11' width='2.2' height='272.63' fill='#F2AFD1' stroke='none' title='Degree deviation from base period in 1947&amp;lt;br/&amp;gt;-0.09 c'/>\n   <rect x='242.64' y='19.11' width='2.2' height='272.63' fill='#EDA9D3' stroke='none' title='Degree deviation from base period in 1948&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='244.85' y='19.11' width='2.2' height='272.63' fill='#EAA5D5' stroke='none' title='Degree deviation from base period in 1949&amp;lt;br/&amp;gt;-0.14 c'/>\n   <rect x='247.04' y='19.11' width='2.2' height='272.63' fill='#DE96DA' stroke='none' title='Degree deviation from base period in 1950&amp;lt;br/&amp;gt;-0.23 c'/>\n   <rect x='249.24' y='19.11' width='2.2' height='272.63' fill='#F6B5CF' stroke='none' title='Degree deviation from base period in 1951&amp;lt;br/&amp;gt;-0.06 c'/>\n   <rect x='251.44' y='19.11' width='2.2' height='272.63' fill='#FFBEC8' stroke='none' title='Degree deviation from base period in 1952&amp;lt;br/&amp;gt;0.02 c'/>\n   <rect x='253.64' y='19.11' width='2.2' height='272.63' fill='#FFB5BA' stroke='none' title='Degree deviation from base period in 1953&amp;lt;br/&amp;gt;0.08 c'/>\n   <rect x='255.84' y='19.11' width='2.2' height='272.63' fill='#EEAAD3' stroke='none' title='Degree deviation from base period in 1954&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='258.03' y='19.11' width='2.2' height='272.63' fill='#E29BD8' stroke='none' title='Degree deviation from base period in 1955&amp;lt;br/&amp;gt;-0.2 c'/>\n   <rect x='260.23' y='19.11' width='2.2' height='272.63' fill='#D88FDC' stroke='none' title='Degree deviation from base period in 1956&amp;lt;br/&amp;gt;-0.26 c'/>\n   <rect x='262.43' y='19.11' width='2.2' height='272.63' fill='#FAB9CD' stroke='none' title='Degree deviation from base period in 1957&amp;lt;br/&amp;gt;-0.04 c'/>\n   <rect x='264.63' y='19.11' width='2.2' height='272.63' fill='#FDBDCC' stroke='none' title='Degree deviation from base period in 1958&amp;lt;br/&amp;gt;-0.02 c'/>\n   <rect x='266.82' y='19.11' width='2.2' height='272.63' fill='#F8B7CE' stroke='none' title='Degree deviation from base period in 1959&amp;lt;br/&amp;gt;-0.05 c'/>\n   <rect x='269.02' y='19.11' width='2.2' height='272.63' fill='#EFABD3' stroke='none' title='Degree deviation from base period in 1960&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='271.22' y='19.11' width='2.2' height='272.63' fill='#FCBCCC' stroke='none' title='Degree deviation from base period in 1961&amp;lt;br/&amp;gt;-0.02 c'/>\n   <rect x='273.42' y='19.11' width='2.2' height='272.63' fill='#F6B4CF' stroke='none' title='Degree deviation from base period in 1962&amp;lt;br/&amp;gt;-0.06 c'/>\n   <rect x='275.62' y='19.11' width='2.2' height='272.63' fill='#FAB9CE' stroke='none' title='Degree deviation from base period in 1963&amp;lt;br/&amp;gt;-0.04 c'/>\n   <rect x='277.81' y='19.11' width='2.2' height='272.63' fill='#D188DF' stroke='none' title='Degree deviation from base period in 1964&amp;lt;br/&amp;gt;-0.31 c'/>\n   <rect x='280.02' y='19.11' width='2.2' height='272.63' fill='#E19AD8' stroke='none' title='Degree deviation from base period in 1965&amp;lt;br/&amp;gt;-0.2 c'/>\n   <rect x='282.21' y='19.11' width='2.2' height='272.63' fill='#EAA4D5' stroke='none' title='Degree deviation from base period in 1966&amp;lt;br/&amp;gt;-0.15 c'/>\n   <rect x='284.41' y='19.11' width='2.2' height='272.63' fill='#EEAAD3' stroke='none' title='Degree deviation from base period in 1967&amp;lt;br/&amp;gt;-0.12 c'/>\n   <rect x='286.61' y='19.11' width='2.2' height='272.63' fill='#E7A1D6' stroke='none' title='Degree deviation from base period in 1968&amp;lt;br/&amp;gt;-0.17 c'/>\n   <rect x='288.81' y='19.11' width='2.2' height='272.63' fill='#FBBACD' stroke='none' title='Degree deviation from base period in 1969&amp;lt;br/&amp;gt;-0.03 c'/>\n   <rect x='291.01' y='19.11' width='2.2' height='272.63' fill='#F3B0D1' stroke='none' title='Degree deviation from base period in 1970&amp;lt;br/&amp;gt;-0.09 c'/>\n   <rect x='293.2' y='19.11' width='2.2' height='272.63' fill='#E19AD9' stroke='none' title='Degree deviation from base period in 1971&amp;lt;br/&amp;gt;-0.21 c'/>\n   <rect x='295.4' y='19.11' width='2.2' height='272.63' fill='#F2AFD1' stroke='none' title='Degree deviation from base period in 1972&amp;lt;br/&amp;gt;-0.09 c'/>\n   <rect x='297.6' y='19.11' width='2.2' height='272.63' fill='#FFB9C0' stroke='none' title='Degree deviation from base period in 1973&amp;lt;br/&amp;gt;0.05 c'/>\n   <rect x='299.8' y='19.11' width='2.2' height='272.63' fill='#E6A0D7' stroke='none' title='Degree deviation from base period in 1974&amp;lt;br/&amp;gt;-0.17 c'/>\n   <rect x='302' y='19.11' width='2.2' height='272.63' fill='#EFABD3' stroke='none' title='Degree deviation from base period in 1975&amp;lt;br/&amp;gt;-0.11 c'/>\n   <rect x='304.19' y='19.11' width='2.2' height='272.63' fill='#DF98D9' stroke='none' title='Degree deviation from base period in 1976&amp;lt;br/&amp;gt;-0.22 c'/>\n   <rect x='306.39' y='19.11' width='2.2' height='272.63' fill='#FFB1B5' stroke='none' title='Degree deviation from base period in 1977&amp;lt;br/&amp;gt;0.1 c'/>\n   <rect x='308.59' y='19.11' width='2.2' height='272.63' fill='#FFBFCA' stroke='none' title='Degree deviation from base period in 1978&amp;lt;br/&amp;gt;0.01 c'/>\n   <rect x='310.79' y='19.11' width='2.2' height='272.63' fill='#FFB3B8' stroke='none' title='Degree deviation from base period in 1979&amp;lt;br/&amp;gt;0.09 c'/>\n   <rect x='312.98' y='19.11' width='2.2' height='272.63' fill='#FFA4A2' stroke='none' title='Degree deviation from base period in 1980&amp;lt;br/&amp;gt;0.2 c'/>\n   <rect x='315.19' y='19.11' width='2.2' height='272.63' fill='#FF9C96' stroke='none' title='Degree deviation from base period in 1981&amp;lt;br/&amp;gt;0.25 c'/>\n   <rect x='317.38' y='19.11' width='2.2' height='272.63' fill='#FFBBC4' stroke='none' title='Degree deviation from base period in 1982&amp;lt;br/&amp;gt;0.03 c'/>\n   <rect x='319.58' y='19.11' width='2.2' height='272.63' fill='#FFA09C' stroke='none' title='Degree deviation from base period in 1983&amp;lt;br/&amp;gt;0.22 c'/>\n   <rect x='321.78' y='19.11' width='2.2' height='272.63' fill='#FFB9C1' stroke='none' title='Degree deviation from base period in 1984&amp;lt;br/&amp;gt;0.05 c'/>\n   <rect x='323.98' y='19.11' width='2.2' height='272.63' fill='#FFB9C0' stroke='none' title='Degree deviation from base period in 1985&amp;lt;br/&amp;gt;0.05 c'/>\n   <rect x='326.18' y='19.11' width='2.2' height='272.63' fill='#FFB3B7' stroke='none' title='Degree deviation from base period in 1986&amp;lt;br/&amp;gt;0.1 c'/>\n   <rect x='328.37' y='19.11' width='2.2' height='272.63' fill='#FF9D98' stroke='none' title='Degree deviation from base period in 1987&amp;lt;br/&amp;gt;0.24 c'/>\n   <rect x='330.57' y='19.11' width='2.2' height='272.63' fill='#FF9890' stroke='none' title='Degree deviation from base period in 1988&amp;lt;br/&amp;gt;0.28 c'/>\n   <rect x='332.77' y='19.11' width='2.2' height='272.63' fill='#FFA7A5' stroke='none' title='Degree deviation from base period in 1989&amp;lt;br/&amp;gt;0.18 c'/>\n   <rect x='334.97' y='19.11' width='2.2' height='272.63' fill='#FF8C80' stroke='none' title='Degree deviation from base period in 1990&amp;lt;br/&amp;gt;0.36 c'/>\n   <rect x='337.17' y='19.11' width='2.2' height='272.63' fill='#FF8F84' stroke='none' title='Degree deviation from base period in 1991&amp;lt;br/&amp;gt;0.34 c'/>\n   <rect x='339.36' y='19.11' width='2.2' height='272.63' fill='#FFAEB0' stroke='none' title='Degree deviation from base period in 1992&amp;lt;br/&amp;gt;0.12 c'/>\n   <rect x='341.57' y='19.11' width='2.2' height='272.63' fill='#FFA9A8' stroke='none' title='Degree deviation from base period in 1993&amp;lt;br/&amp;gt;0.17 c'/>\n   <rect x='343.76' y='19.11' width='2.2' height='272.63' fill='#FF9F9A' stroke='none' title='Degree deviation from base period in 1994&amp;lt;br/&amp;gt;0.23 c'/>\n   <rect x='345.96' y='19.11' width='2.2' height='272.63' fill='#FF897C' stroke='none' title='Degree deviation from base period in 1995&amp;lt;br/&amp;gt;0.38 c'/>\n   <rect x='348.16' y='19.11' width='2.2' height='272.63' fill='#FF9891' stroke='none' title='Degree deviation from base period in 1996&amp;lt;br/&amp;gt;0.28 c'/>\n   <rect x='350.36' y='19.11' width='2.2' height='272.63' fill='#FF8373' stroke='none' title='Degree deviation from base period in 1997&amp;lt;br/&amp;gt;0.42 c'/>\n   <rect x='352.55' y='19.11' width='2.2' height='272.63' fill='#FF6954' stroke='none' title='Degree deviation from base period in 1998&amp;lt;br/&amp;gt;0.58 c'/>\n   <rect x='354.75' y='19.11' width='2.2' height='272.63' fill='#FF9187' stroke='none' title='Degree deviation from base period in 1999&amp;lt;br/&amp;gt;0.32 c'/>\n   <rect x='356.95' y='19.11' width='2.2' height='272.63' fill='#FF9086' stroke='none' title='Degree deviation from base period in 2000&amp;lt;br/&amp;gt;0.33 c'/>\n   <rect x='359.15' y='19.11' width='2.2' height='272.63' fill='#FF7866' stroke='none' title='Degree deviation from base period in 2001&amp;lt;br/&amp;gt;0.49 c'/>\n   <rect x='361.35' y='19.11' width='2.2' height='272.63' fill='#FF6F5B' stroke='none' title='Degree deviation from base period in 2002&amp;lt;br/&amp;gt;0.54 c'/>\n   <rect x='363.54' y='19.11' width='2.2' height='272.63' fill='#FF6F5B' stroke='none' title='Degree deviation from base period in 2003&amp;lt;br/&amp;gt;0.54 c'/>\n   <rect x='365.74' y='19.11' width='2.2' height='272.63' fill='#FF7B6A' stroke='none' title='Degree deviation from base period in 2004&amp;lt;br/&amp;gt;0.47 c'/>\n   <rect x='367.94' y='19.11' width='2.2' height='272.63' fill='#FF644E' stroke='none' title='Degree deviation from base period in 2005&amp;lt;br/&amp;gt;0.61 c'/>\n   <rect x='370.14' y='19.11' width='2.2' height='272.63' fill='#FF6A55' stroke='none' title='Degree deviation from base period in 2006&amp;lt;br/&amp;gt;0.57 c'/>\n   <rect x='372.34' y='19.11' width='2.2' height='272.63' fill='#FF6751' stroke='none' title='Degree deviation from base period in 2007&amp;lt;br/&amp;gt;0.59 c'/>\n   <rect x='374.53' y='19.11' width='2.2' height='272.63' fill='#FF7C6A' stroke='none' title='Degree deviation from base period in 2008&amp;lt;br/&amp;gt;0.47 c'/>\n   <rect x='376.74' y='19.11' width='2.2' height='272.63' fill='#FF6650' stroke='none' title='Degree deviation from base period in 2009&amp;lt;br/&amp;gt;0.6 c'/>\n   <rect x='378.93' y='19.11' width='2.2' height='272.63' fill='#FF573F' stroke='none' title='Degree deviation from base period in 2010&amp;lt;br/&amp;gt;0.68 c'/>\n   <rect x='381.13' y='19.11' width='2.2' height='272.63' fill='#FF705C' stroke='none' title='Degree deviation from base period in 2011&amp;lt;br/&amp;gt;0.54 c'/>\n   <rect x='383.33' y='19.11' width='2.2' height='272.63' fill='#FF6954' stroke='none' title='Degree deviation from base period in 2012&amp;lt;br/&amp;gt;0.58 c'/>\n   <rect x='385.53' y='19.11' width='2.2' height='272.63' fill='#FF614B' stroke='none' title='Degree deviation from base period in 2013&amp;lt;br/&amp;gt;0.62 c'/>\n   <rect x='387.72' y='19.11' width='2.2' height='272.63' fill='#FF5841' stroke='none' title='Degree deviation from base period in 2014&amp;lt;br/&amp;gt;0.67 c'/>\n   <rect x='389.92' y='19.11' width='2.2' height='272.63' fill='#FF3621' stroke='none' title='Degree deviation from base period in 2015&amp;lt;br/&amp;gt;0.83 c'/>\n   <rect x='392.12' y='19.11' width='2.2' height='272.63' fill='#FF0000' stroke='none' title='Degree deviation from base period in 2016&amp;lt;br/&amp;gt;0.93 c'/>\n   <rect x='394.32' y='19.11' width='2.2' height='272.63' fill='#FF301C' stroke='none' title='Degree deviation from base period in 2017&amp;lt;br/&amp;gt;0.85 c'/>\n   <rect x='396.52' y='19.11' width='2.2' height='272.63' fill='#FF452E' stroke='none' title='Degree deviation from base period in 2018&amp;lt;br/&amp;gt;0.76 c'/>\n   <rect x='398.71' y='19.11' width='2.2' height='272.63' fill='#FF1F0F' stroke='none' title='Degree deviation from base period in 2019&amp;lt;br/&amp;gt;0.89 c'/>\n   <rect x='400.91' y='19.11' width='2.2' height='272.63' fill='#FF0B03' stroke='none' title='Degree deviation from base period in 2020&amp;lt;br/&amp;gt;0.92 c'/>\n   <rect x='403.11' y='19.11' width='2.2' height='272.63' fill='#FF462F' stroke='none' title='Degree deviation from base period in 2021&amp;lt;br/&amp;gt;0.76 c'/>\n   <rect x='405.31' y='19.11' width='2.2' height='272.63' fill='#FF3B25' stroke='none' title='Degree deviation from base period in 2022&amp;lt;br/&amp;gt;0.8 c'/>\n   <rect x='8.22' y='5.48' width='418.3' height='299.89' fill='none' stroke='#B3B3B3' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_5fb82fd4-c032-4411-957b-c48c3ccd750b_c1)'>\n   <polyline points='28.33,308.11 28.33,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='138.24,308.11 138.24,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='248.14,308.11 248.14,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='358.05,308.11 358.05,305.37' fill='none' stroke='#B3B3B3' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='18.54' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1850<\/text>\n   <text x='128.44' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1900<\/text>\n   <text x='238.35' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>1950<\/text>\n   <text x='348.25' y='316.6' font-size='6.6pt' font-family='Arial' fill='#4D4D4D'>2000<\/text>\n   <text x='206.25' y='329.07' font-size='8.25pt' font-family='Arial'>Year<\/text>\n   <text x='334.56' y='343.17' font-size='6.6pt' font-family='Arial'>Inspired by Ed Hawkins<\/text>\n   <text x='330.79' y='352.67' font-size='6.6pt' font-family='Arial'>Data from the Met Office<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_5fb82fd4-c032-4411-957b-c48c3ccd750b","ratio":1.2,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px 2px 2px 2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","offx":10,"offy":0,"use_cursor_pos":true,"opacity":0.9,"usefill":false,"usestroke":false,"delay":{"over":200,"out":500}},"hover":{"css":".hover_SVGID_ { fill:orange;stroke:gray; }","reactive":false},"hoverkey":{"css":".hover_key_SVGID_ { stroke:red; }","reactive":false},"hovertheme":{"css":".hover_theme_SVGID_ { fill:green; }","reactive":false},"hoverinv":{"css":""},"zoom":{"min":1,"max":1},"capture":{"css":".selected_SVGID_ { fill:red;stroke:gray; }","type":"multiple","only_shiny":true,"selected":[]},"capturekey":{"css":".selected_key_SVGID_ { stroke:gray; }","type":"single","only_shiny":true,"selected":[]},"capturetheme":{"css":".selected_theme_SVGID_ { stroke:gray; }","type":"single","only_shiny":true,"selected":[]},"toolbar":{"position":"top","saveaspng":false,"pngname":"diagram"},"sizing":{"rescale":true,"width":0.75}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="post-script" class="level3"><h3 class="anchored" data-anchor-id="post-script">Post script</h3>
<section id="what-about-the-confidence-level" class="level4"><h4 class="anchored" data-anchor-id="what-about-the-confidence-level">What about the confidence level?</h4>
<p>What about averaging across the year? We can make use of the <code>lubridate</code> package again! This time we use the <code>year</code> function to get the year (as a number) out of the time column.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="va">anomaly_deg_c</span><span class="op">:</span><span class="va">upper_confidence_limit_97_5_percent</span>, <span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">year</span>, .keep_all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, ymin <span class="op">=</span> <span class="va">lower_confidence_limit_2_5_percent</span>, ymax <span class="op">=</span> <span class="va">upper_confidence_limit_97_5_percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that as time goes on, we get better at measuring things with a lower margin of error.</p>
</section><section id="bars-with-scale" class="level4"><h4 class="anchored" data-anchor-id="bars-with-scale">Bars with scale</h4>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">anomaly_deg_c</span>, fill <span class="op">=</span> <span class="va">anomaly_deg_c</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, midpoint <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_colourbar.html">guide_colorbar</a></span><span class="op">(</span>barwidth <span class="op">=</span> <span class="fl">25</span>, barheight <span class="op">=</span> <span class="fl">1</span>, title.position <span class="op">=</span> <span class="st">"top"</span>, title.hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Show_your_stripes_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section></section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
      <div class="nav-footer-center">© 2022</div>
  </div>
</footer>


</body></html>