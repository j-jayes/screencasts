{"title":"Untitled","markdown":{"yaml":{"title":"Untitled","author":"JJayes","date":"2022-04-24","output":"html_document"},"headingText":"Reading in the data","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```\n\n\n```{r}\nlibrary(tidyverse)\ndf <- readr::read_csv(\"https://www.metoffice.gov.uk/hadobs/hadcrut5/data/current/analysis/diagnostics/HadCRUT.5.0.1.0.analysis.summary_series.global.monthly.csv\")\n\ndf\n```\n\n```{r}\ndf %>% colnames()\n```\n\n\n```{r}\ndf <- df %>% \n  janitor::clean_names()\n\ndf\n```\n\n\n### EDA\n\n```{r}\ndf %>% skimr::skim()\n```\n\n```{r}\ndf %>% \n  ggplot(aes(x = time, y = anomaly_deg_c)) +\n  geom_point()\n```\n\n```{r}\ndf %>% \n  select(time)\n```\n\n```{r}\ndf <- df %>% \n  mutate(time = lubridate::ymd(paste0(time, \"-01\")))\n```\n\n```{r}\ndf %>% \n  ggplot(aes(x = time, y = anomaly_deg_c)) +\n  geom_point() +\n  geom_smooth() +\n  geom_hline(yintercept = 0, lty = 2)\n```\n\n\n### Recreating the figure\n\n```{r}\ndf %>% \n  ggplot(aes(x = time, y = 1, fill = anomaly_deg_c)) +\n  geom_tile() +\n  scale_fill_gradient2(low = \"blue\", high = \"red\", mid = \"white\",\n                       midpoint = 0) +\n  theme(legend.position = \"none\",\n        panel.grid = element_blank(),\n        axis.ticks.y = element_blank(),\n        axis.text.y = element_blank()) +\n  labs(x = \"Year\",\n       y = NULL,\n       caption = \"Inspred by Ed Hawkins\\nData from the Met Office\")\n```\n\n```{r}\ndf <- df %>% \n  mutate(year = lubridate::year(time)) %>% \n  group_by(year) %>% \n  mutate(across(anomaly_deg_c:upper_confidence_limit_97_5_percent, mean)) %>% \n  ungroup() %>% \n  distinct(year, .keep_all = T)\n```\n\n```{r}\ndf %>% \n    ggplot(aes(x = time, y = 1, fill = anomaly_deg_c)) +\n  geom_tile() +\n  scale_fill_gradient2(low = \"blue\", high = \"red\", mid = \"white\",\n                       midpoint = 0) +\n  theme(legend.position = \"none\",\n        panel.grid = element_blank(),\n        axis.ticks.y = element_blank(),\n        axis.text.y = element_blank()) +\n  labs(x = \"Year\",\n       y = NULL,\n       caption = \"Inspred by Ed Hawkins\\nData from the Met Office\")\n```\n\n\n### Interactivity\n\n```{r}\nlibrary(ggiraph)\n\ng <- df %>%\n  mutate(tooltip = str_c(\"Deviation from base period in \", year, \"\\n\", round(anomaly_deg_c, 2), \" c\")) %>% \n  ggplot(aes(x = time, y = 1, fill = anomaly_deg_c, tooltip = tooltip)) +\n  geom_tile_interactive() +\n  scale_fill_gradient2(\n    low = \"blue\", high = \"red\", mid = \"white\",\n    midpoint = 0\n  ) +\n  theme(\n    legend.position = \"none\",\n    panel.grid = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.text.y = element_blank()\n  ) +\n  labs(\n    x = \"Year\",\n    y = NULL,\n    caption = \"Inspred by Ed Hawkins\\nData from the Met Office\"\n  )\n\nggiraph(ggobj = g)\n```\n\n\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"Show_your_stripes.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.237","editor":"source","theme":{"light":["cosmo","../theme.scss"]},"title":"Untitled","author":"JJayes","date":"2022-04-24"},"extensions":{"book":{"multiFile":true}}}}}