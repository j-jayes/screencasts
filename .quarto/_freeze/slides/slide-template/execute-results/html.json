{
  "hash": "c1005367f8ad7c7a8710dfde58d6e044",
  "result": {
    "markdown": "---\nformat:\n  revealjs:\n    theme: simple\n---\n\n\n\n\n# Exploring Gender Equality in the EU\n\n## Purpose\n\nShow a workflow in creating an interactive figure and highlight some data munging tips.\n\nFocus is on:\n\n- Getting data from excel into R with some nice functions etc.\n- Interactive charts\n- Data viz\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\")\n```\n\n::: {.cell-output-display}\n![](slide-template_files/figure-revealjs/unnamed-chunk-1-1.png){width=960}\n:::\n:::\n\n\n\n## Intro\n\nData from [landing page](https://eige.europa.eu/gender-equality-index/2021) and you can download the excel sheet [here](https://eige.europa.eu/sites/all/modules/custom/eige_gei/app/content/downloads/gender-equality-index-2013-2015-2017-2019-2020-2021.xlsx).\n\nThere are more than 140 indicators that fall into 6 domains and 14 sub-domains.\n\n## Description of data ingestion\n\nThe data comes in a common format -- there is an excel workbook with a readme sheet, then a metadata sheet describing the different variables, then a sheet for the years 2010, 2012, 2015, 2017, 2018 and 2019.\n\nWe can make a simple plot of the index changes over time, in relative terms and in absolute terms.\n\n# Ingest\n\n## Readme sheet\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\ntheme_set(theme_light())\ndf <- readxl::read_excel(here(\"data/Gender-equality-index.xlsx\"))\n\ndf %>% \n  knitr::kable()\n```\n\n::: {.cell-output-display}\n|This excel file is meant to provide users the data needed to calculate the Gender Equality Index                                                                                                                                                             |\n|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|Users must use the data provided in these sheets (one per year), to derive the scores of the Gender Equality Index, by applying the methodology for calculation                                                                                              |\n|Gender Equality Index 2017: Methodological Report &#124; European Institute for Gender Equality (europa.eu)                                                                                                                                                  |\n|- Users might find in Index Interface different data for some indicators                                                                                                                                                                                     |\n|- In the Index Interface, EIGE is presenting some of them in a different way                                                                                                                                                                                 |\n|- For instance, the indicator on povery (indicator 8), is considered for calculation as NOT-AT-RISK of POVERTY rate, while in the Index interface, the figures are referred to AT-RISK of POVERTY rate                                                       |\n|- The same for the indicators on access to health care, displayed as UNMET NEEDS in the Index interface, and used in a reversed way for calculation.                                                                                                         |\n|- As for the indicator of the domain of power, the methodology envisages to use the 3-years average, and the figures in the excel are provided accordingly. In the Index interface, the most updated data (quarterly, biannual, year) are displayed instead. |\n|- The Index Inteface provides the information in the notes and metadata for each indicator                                                                                                                                                                   |\n:::\n:::\n\n\n## Codebook\n\nThe problem is that this is written in a silly way - it's readable to humans but not to computers\n\n\n::: {.cell}\n\n:::\n\n\n\n## Data read in process\n\nWhat we want to do is take the wide dataset from the year tabs and then make them long so that we can collect them together and draw some functions over time.\n\nI should make a graphic of how we go from colours having meaning to columns containing this kind of information. Like a panel on the left where we have a screenshot of the excel sheet - then an arrow - then on the right we have a nice simple grouped dataset on the right.\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "slide-template_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}